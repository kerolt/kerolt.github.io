<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>C++ | Kerolt's Blog</title><meta name=keywords content><meta name=description content="ExampleSite description"><meta name=author content="Kerolt"><link rel=canonical href=https://kerolt.github.io/categories/c++/><meta name=google-site-verification content="NpIO0KEIJS0CPRzTzQCbYQdSRIyb0Lspx"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="2300A23B82DB579A2DEA6261191AD771"><link crossorigin=anonymous href=/assets/css/stylesheet.f0919acbfa8bf65c44a042e5b3a8e1ba558a81a96c3fa156fbcade0ffc860c1f.css integrity="sha256-8JGay/qL9lxEoELls6jhulWKgalsP6FW+8reD/yGDB8=" rel="preload stylesheet" as=style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/cn-fontsource-source-han-serif-sc-vf@1.0.9/font.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-web/style.css><link rel=icon href=https://kerolt.github.io/images/avatar/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://kerolt.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://kerolt.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://kerolt.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://kerolt.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://kerolt.github.io/categories/c++/index.xml><link rel=alternate hreflang=en href=https://kerolt.github.io/categories/c++/><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://kerolt.github.io/categories/c++/"><meta property="og:site_name" content="Kerolt's Blog"><meta property="og:title" content="C++"><meta property="og:description" content="ExampleSite description"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://kerolt.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kerolt.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="C++"><meta name=twitter:description content="ExampleSite description"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kerolt.github.io/ accesskey=h title="Kerolt's Blog (Alt + H)">Kerolt's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kerolt.github.io/posts/ title=æ–‡ç« ><span>æ–‡ç« </span></a></li><li><a href=https://kerolt.github.io/categories/ title=åˆ†ç±»><span>åˆ†ç±»</span></a></li><li><a href=https://kerolt.github.io/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://kerolt.github.io/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://kerolt.github.io/about/ title=å…³äºæˆ‘><span>å…³äºæˆ‘</span></a></li><li><a href=https://kerolt.github.io/search/ title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://kerolt.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://kerolt.github.io/categories/>Categories</a></div><h1>C++
<a href=/categories/c++/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>C++å¯¹Rustä¸­Resultçš„ç®€å•æ¨¡ä»¿</h2></header><div class=entry-content><p>æ³¨æ„ï¼ ä»¥ä¸‹ä»£ç éœ€è¦æ”¯æŒ C++23 çš„ç¼–è¯‘å™¨
è¿™é‡Œåˆ©ç”¨ std::expected å’Œ std::unexpected è¿›è¡Œæ¨¡ä»¿ï¼š
#include &lt;print> #include &lt;string> #include &lt;expected> template &lt;typename E = std::string> using Err = std::unexpected&lt;E>; template &lt;typename T, typename E = std::string> using Result = std::expected&lt;T, E>; struct Inner { int a, b; }; struct X { Inner* i_; X(Inner* i) { std::println("X()"); i_ = i; } ~X() { std::println("~X() delete inner obj"); delete i_; } }; auto foo(bool flag) -> Result&lt;X> { if (!flag) { return Err&lt;>("Flag is false!"); } Inner* i = new Inner(); i->a = 1; i->b = 2; return Result&lt;X>{i}; } int main() { std::println("main--1"); { std::println("main--2"); auto x = foo(true); std::println("main--3"); } { std::println("main--4"); auto x = foo(false); std::println("Error message is: {}", x.error()); std::println("main--5"); } std::println("main--6"); } è¾“å‡ºä¸ºï¼š
...</p></div><footer class=entry-footer><span title='2026-01-20 00:00:00 +0000 UTC'>å‘å¸ƒäº2026-01-20</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to C++å¯¹Rustä¸­Resultçš„ç®€å•æ¨¡ä»¿" href=https://kerolt.github.io/posts/c++/c++%E5%AF%B9rust%E4%B8%ADresult%E7%9A%84%E7%AE%80%E5%8D%95%E6%A8%A1%E4%BB%BF/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>C&amp;C++ç±»å‹åŒå…³è½¬æ¢</h2></header><div class=entry-content><p>#include &lt;iostream> auto ASSERT(bool flag, const char* msg) { if (!flag) { std::cerr &lt;&lt; msg &lt;&lt; std::endl; } } // READ: æšä¸¾ç±»å‹ &lt;https://zh.cppreference.com/w/cpp/language/enum> // `enum` æ˜¯ C çš„å…¼å®¹ç±»å‹ï¼Œæœ¬è´¨ä¸Šå…¶å¯¹åº”ç±»å‹çš„å¸¸é‡ã€‚ // åœ¨ `enum` ä¸­å®šä¹‰æ ‡è¯†ç¬¦ç­‰ä»·äºå®šä¹‰ constexpr å¸¸é‡ï¼Œ // è¿™äº›æ ‡è¯†ç¬¦ä¸éœ€è¦å‰ç¼€ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨ã€‚ // å› æ­¤ `enum` å®šä¹‰ä¼šæ±¡æŸ“å‘½åç©ºé—´ã€‚ enum ColorEnum : unsigned char { COLOR_RED = 31, COLOR_GREEN, COLOR_YELLOW, COLOR_BLUE, }; // æœ‰ä½œç”¨åŸŸæšä¸¾å‹æ˜¯ C++ å¼•å…¥çš„ç±»å‹å®‰å…¨æšä¸¾ã€‚ // å…¶å†…éƒ¨æ ‡è¯†ç¬¦éœ€è¦å¸¦å‰ç¼€å¼•ç”¨ï¼Œå¦‚ `Color::Red`ã€‚ // ä½œç”¨åŸŸæšä¸¾å‹å¯ä»¥é¿å…å‘½åç©ºé—´æ±¡æŸ“ï¼Œå¹¶æä¾›ç±»å‹å®‰å…¨ä¿è¯ã€‚ enum class Color : int { Red = COLOR_RED, Green, Yellow, Blue, }; ColorEnum convert_by_pun(Color c) { // READ: &lt;https://zh.cppreference.com/w/cpp/language/union> // `union` è¡¨ç¤ºåœ¨åŒä¸€å†…å­˜ä½ç½®å­˜å‚¨çš„ä¸åŒç±»å‹çš„å€¼ã€‚ // å…¶å¸¸è§ç”¨æ³•æ˜¯å®ç°ç±»å‹åŒå…³è½¬æ¢ï¼Œå³å°†ä¸€ç§ç±»å‹çš„å€¼è½¬æ¢ä¸ºå¦ä¸€ç§æ— å…³ç±»å‹çš„å€¼ã€‚ // ä½†è¿™ç§å†™æ³•å®é™…ä¸Šä»…åœ¨ C è¯­è¨€è‰¯å®šä¹‰ï¼Œåœ¨ C++ ä¸­æ˜¯æœªå®šä¹‰è¡Œä¸ºã€‚ // è¿™æ˜¯æ¯”è¾ƒå°‘è§çš„ C++ ä¸ä¸ C ä¿æŒå…¼å®¹çš„ç‰¹æ€§ã€‚ // READ: ç±»å‹åŒå…³ &lt;https://tttapa.github.io/Pages/Programming/Cpp/Practices/type-punning.html> union TypePun { ColorEnum e; Color c; }; TypePun pun; pun.c = c; return pun.e; } int main(int argc, char **argv) { ASSERT(convert_by_pun(Color::Red) == COLOR_RED, "Type punning conversion"); ASSERT(convert_by_pun(Color::Green) == COLOR_GREEN, "Type punning conversion"); ASSERT(convert_by_pun(Color::Yellow) == COLOR_YELLOW, "Type punning conversion"); ASSERT(convert_by_pun(Color::Blue) == COLOR_BLUE, "Type punning conversion"); return 0; }</p></div><footer class=entry-footer><span title='2025-08-21 00:00:00 +0000 UTC'>å‘å¸ƒäº2025-08-21</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to C&C++ç±»å‹åŒå…³è½¬æ¢" href=https://kerolt.github.io/posts/c++/cc++%E7%B1%BB%E5%9E%8B%E5%8F%8C%E5%85%B3%E8%BD%AC%E6%8D%A2/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>å…³äºå†…å­˜å¯¹é½ã€ä½åŸŸçš„æ€è€ƒ</h2></header><div class=entry-content><p>ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ å†…å­˜å¯¹é½ï¼ˆMemory Alignmentï¼‰æ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­æ•°æ®åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¸€ç§è§„åˆ™ï¼šâ€‹â€‹æ•°æ®åœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€å¿…é¡»æ˜¯å…¶è‡ªèº«å¤§å°çš„æ•´æ•°å€â€‹â€‹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª 4 å­—èŠ‚çš„æ•´å‹å˜é‡ï¼ˆintï¼‰ï¼Œå…¶èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 4 çš„å€æ•°ï¼ˆå¦‚åœ°å€ 0x0000ã€0x0004ã€0x0008 ç­‰ï¼‰ã€‚
è€Œéœ€è¦å†…å­˜å¯¹é½ä¸»è¦åŸºäºä»¥ä¸‹ä¸‰ä¸ªåŸå› ï¼š
â€‹â€‹ç¡¬ä»¶è®¿é—®æ•ˆç‡â€‹â€‹ï¼š CPU é€šè¿‡å†…å­˜æ€»çº¿ä»å†…å­˜è¯»å–æ•°æ®æ—¶ï¼Œé€šå¸¸ä»¥å›ºå®šå¤§å°çš„â€œå—â€ä¸ºå•ä½ï¼ˆä¾‹å¦‚ 4 å­—èŠ‚æˆ– 8 å­—èŠ‚ï¼‰ã€‚å¦‚æœæ•°æ®å¯¹é½ï¼ŒCPU ä¸€æ¬¡è¯»å–æ“ä½œå³å¯è·å–å®Œæ•´æ•°æ®ã€‚ â€‹â€‹éå¯¹é½ç¤ºä¾‹â€‹â€‹ï¼šå‡è®¾ä¸€ä¸ª int å˜é‡ï¼ˆ4 å­—èŠ‚ï¼‰å­˜å‚¨åœ¨åœ°å€ 0x0001ï¼ˆé 4 çš„å€æ•°ï¼‰ï¼ŒCPU éœ€è¦åˆ†ä¸¤æ¬¡è¯»å–ï¼šå…ˆè¯»å– 0x0000-0x0003ï¼ˆåŒ…å«å‰ 3 å­—èŠ‚ï¼‰ï¼Œå†è¯»å– 0x0004-0x0007ï¼ˆåŒ…å«æœ€å 1 å­—èŠ‚ï¼‰ï¼Œæœ€åæ‹¼æ¥æ•°æ®ã€‚è¿™ä¼šæ˜¾è‘—é™ä½æ€§èƒ½ã€‚ â€‹â€‹ç¡¬ä»¶å…¼å®¹æ€§â€‹â€‹ï¼š éƒ¨åˆ†æ¶æ„ï¼ˆå¦‚ ARMã€MIPSï¼‰çš„ CPU æ— æ³•ç›´æ¥è®¿é—®éå¯¹é½å†…å­˜ã€‚å°è¯•è®¿é—®æ—¶ä¼šå¯¼è‡´ç¡¬ä»¶å¼‚å¸¸ï¼ˆå¦‚â€œæ€»çº¿é”™è¯¯â€ï¼‰ã€‚å¯¹é½ä¿è¯äº†ä»£ç çš„è·¨å¹³å°å…¼å®¹æ€§ã€‚ â€‹â€‹ç¼“å­˜æ•ˆç‡ä¼˜åŒ–â€‹â€‹ï¼š ç°ä»£ CPU ä½¿ç”¨ç¼“å­˜è¡Œï¼ˆCache Lineï¼Œé€šå¸¸ 64 å­—èŠ‚ï¼‰é¢„åŠ è½½æ•°æ®ã€‚å¯¹é½çš„æ•°æ®æ›´å¯èƒ½å®Œæ•´åœ°ä½äºå•ä¸ªç¼“å­˜è¡Œä¸­ã€‚è‹¥æ•°æ®è·¨ç¼“å­˜è¡Œå­˜å‚¨ï¼Œä¼šå¼•å‘ä¸¤æ¬¡ç¼“å­˜è®¿é—®ï¼Œé™ä½æ•ˆç‡ã€‚ alignas å’Œ alignof c++11 ä»¥åå¼•å…¥ä¸¤ä¸ªå…³é”®å­—Â alignas ä¸Â alignofã€‚
alignas ç”¨äºæ˜¾å¼è®¾ç½®å˜é‡ã€ç±»æˆå‘˜æˆ–ç±»å‹çš„å†…å­˜å¯¹é½è¦æ±‚ï¼›è€Œ alignof ç”¨äºè·å–ç±»å‹æˆ–å˜é‡çš„å†…å­˜å¯¹é½è¦æ±‚ã€‚ä¾‹å¦‚ï¼š
struct Test1 {}; struct alignas(4) Test2 {}; static_assert(sizeof(Test1) == 1); static_assert(sizeof(Test2) == 4); static_assert(alignof(Test1) == 1); static_assert(alignof(Test2) == 4); alignas æ”¯æŒä¸‰ç§è¯­æ³•å½¢å¼ï¼š
alignas(expression)ï¼šexpressionÂ å¿…é¡»æ˜¯è®¡ç®—ç»“æœä¸ºé›¶çš„æ•´æ•°å¸¸é‡è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯å¯¹é½æˆ–æ‰©å±•å¯¹é½çš„æœ‰æ•ˆå€¼ï¼ˆ2 çš„å€æ•°ï¼‰ã€‚ alignas(type-id)ï¼šç­‰æ•ˆäºÂ alignas(alignof(type-id)) alignas(pack...)ï¼šç­‰æ•ˆäºåº”ç”¨äºåŒä¸€å£°æ˜çš„å¤šä¸ª alignas è¯´æ˜ç¬¦ï¼Œå‚æ•°åŒ…çš„æ¯ä¸ªæˆå‘˜å¯¹åº”ä¸€ä¸ªè¯´æ˜ç¬¦ï¼Œå¯ä»¥æ˜¯ç±»å‹å‚æ•°åŒ…æˆ–å¸¸é‡å‚æ•°åŒ… Note æ³¨æ„ï¼šè‹¥æŒ‡å®šçš„å¯¹é½å€¼å°äºç¼–è¯‘å™¨é»˜è®¤å¯¹é½è¦æ±‚ï¼Œéƒ¨åˆ†ç¼–è¯‘å™¨å¯èƒ½å¿½ç•¥è¯¥è®¾ç½®ã€‚
...</p></div><footer class=entry-footer><span title='2025-07-22 00:00:00 +0000 UTC'>å‘å¸ƒäº2025-07-22</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to å…³äºå†…å­˜å¯¹é½ã€ä½åŸŸçš„æ€è€ƒ" href=https://kerolt.github.io/posts/c++/%E5%85%B3%E4%BA%8E%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E4%BD%8D%E5%9F%9F%E7%9A%84%E6%80%9D%E8%80%83/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>C++é€æ˜è¿ç®—ç¬¦</h2></header><div class=entry-content><p>é€æ˜è¿ç®—ç¬¦çš„æ¦‚å¿µä¸ä»·å€¼ åœ¨ C++ ç¼–ç¨‹ä¸­ï¼Œå½“ç¼–å†™æ³›å‹ä»£ç æ—¶ï¼Œä¸åŒç±»å‹çš„æ¯”è¾ƒæˆ–æ“ä½œå¯èƒ½å¯¼è‡´æ„å¤–çš„ç±»å‹è½¬æ¢æˆ–ç²¾åº¦æŸå¤±ã€‚å‡è®¾æœ‰ä¸€ä¸ª std::vector&lt;uint32_t>ï¼Œä½¿ç”¨è‡ªå®šä¹‰ä»¿å‡½æ•°è¿›è¡Œæ’åºï¼Œä¸€åˆ‡è¿è¡Œæ­£å¸¸ã€‚ä½†å½“ä½ å°†å®¹å™¨æ”¹ä¸º std::vector&lt;uint64_t> å´å¿˜è®°ä¿®æ”¹ä»¿å‡½æ•°çš„å®ç°æ—¶ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œä½†æ•°æ®å¯èƒ½åœ¨æ¯”è¾ƒå‰è¢«é™é»˜æˆªæ–­ï¼Œå¯¼è‡´æ’åºç»“æœå®Œå…¨é”™è¯¯ã€‚è€Œ C++14 å¼•å…¥é€æ˜è¿ç®—ç¬¦å¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…è¿™ç§ bugã€‚
é€æ˜è¿ç®—ç¬¦ï¼ˆTransparent Operatorï¼‰æ˜¯ C++14 å¼•å…¥çš„ä¸€é¡¹å¼ºå¤§ç‰¹æ€§ï¼Œå®ƒé€šè¿‡ std::less&lt;>ã€std::greater&lt;> ç­‰ç©ºæ¨¡æ¿å‚æ•°çš„è¿ç®—ç¬¦å‡½å­å®ç°ï¼Œå…è®¸ç¼–è¯‘å™¨åœ¨æ¨¡æ¿å®ä¾‹åŒ–æ—¶è‡ªåŠ¨æ¨å¯¼æ“ä½œæ•°çš„å®é™…ç±»å‹ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„ç±»å‹è½¬æ¢å’Œæ½œåœ¨é”™è¯¯ã€‚ä¸ä¼ ç»Ÿçš„é‡è½½è¿ç®—ç¬¦ä¸åŒï¼Œé€æ˜è¿ç®—ç¬¦çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶ç±»å‹é€æ˜æ€§â€”â€”å®ƒä»¬ä¸ä¼šå¼ºè¿«æ“ä½œæ•°è½¬æ¢ä¸ºç‰¹å®šç±»å‹ï¼Œè€Œæ˜¯æ ¹æ®æ“ä½œæ•°çš„å®é™…ç±»å‹è¿›è¡Œæ¨å¯¼ï¼Œä¿ç•™å®Œæ•´çš„ç±»å‹ä¿¡æ¯ã€‚
ä¼ ç»Ÿ C++ è¿ç®—ç¬¦é‡è½½éœ€è¦ä¸¥æ ¼å®šä¹‰æ“ä½œæ•°ç±»å‹ï¼Œè¿™ä½¿å¾—ç¼–å†™çœŸæ­£é€šç”¨çš„æ³›å‹ä»£ç å˜å¾—å›°éš¾ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ std::less&lt;int> è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå®ƒä¼šå¼ºåˆ¶å°†ä¸¤ä¸ªæ“ä½œæ•°éƒ½è§†ä¸º int ç±»å‹ï¼Œå¦‚æœæ“ä½œæ•°å®é™…æ˜¯ long æˆ– doubleï¼Œå°±å¯èƒ½å‘ç”Ÿç²¾åº¦æŸå¤±æˆ–æ„å¤–çš„ç±»å‹è½¬æ¢ã€‚è€Œé€æ˜è¿ç®—ç¬¦å¦‚ std::less&lt;> åˆ™è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¨¡æ¿åŒ–çš„å‡½å­ï¼Œèƒ½å¤Ÿè‡ªåŠ¨é€‚åº”æ“ä½œæ•°çš„ç±»å‹ï¼Œä¿æŒä»£ç çš„é€šç”¨æ€§å’Œå®‰å…¨æ€§ã€‚
å®ç°åŸç† é€æ˜è¿ç®—ç¬¦çš„ç¥å¥‡ä¹‹å¤„åœ¨äºå…¶ç®€æ´è€Œç²¾å¦™çš„å®ç°æœºåˆ¶ã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢ç©¶å…¶å·¥ä½œåŸç†ï¼Œæ­å¼€è¿™å±‚çœ‹ä¼¼ç®€å•çš„è¯­æ³•ç³–è¡£ä¸‹è•´å«çš„å¼ºå¤§èƒ½åŠ›ã€‚
æ¨¡æ¿å…ƒç¼–ç¨‹æŠ€å·§ é€æ˜è¿ç®—ç¬¦çš„æ ¸å¿ƒå®ç°ä¾èµ–äºç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨ï¼ˆoperator&lt;>ï¼‰è¿™ä¸€å·§å¦™è®¾è®¡ã€‚è§‚å¯Ÿ std::less çš„æ ‡å‡†åº“å®ç°ï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒæä¾›äº†ä¸¤ç§å½¢å¼ï¼š
// ä¼ ç»Ÿå½¢å¼ï¼šæŒ‡å®šæ¯”è¾ƒç±»å‹ template &lt;class T> struct less { bool operator()(const T& lhs, const T& rhs) const; }; // é€æ˜å½¢å¼ï¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼ template &lt;> struct less&lt;void> { template &lt;class T, class U> auto operator()(T&& t, U&& u) const -> decltype(std::forward&lt;T>(t) &lt; std::forward&lt;U>(u)); }; å½“ä½¿ç”¨ std::less&lt;> æ—¶ï¼Œæˆ‘ä»¬ç‰¹åŒ–åˆ°äº† less&lt;void>ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæ³›åŒ–çš„å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ã€‚è¿™ä¸ªè¿ç®—ç¬¦æ˜¯æ¨¡æ¿æˆå‘˜å‡½æ•°ï¼Œæ¥å—ä»»æ„ç±»å‹çš„ä¸¤ä¸ªå‚æ•° T å’Œ Uï¼Œå¹¶è¿”å›å®ƒä»¬æ¯”è¾ƒçš„ç»“æœã€‚
ç±»å‹æ¨å¯¼ä¸å®Œç¾è½¬å‘ é€æ˜è¿ç®—ç¬¦çš„å®ç°ä¾èµ–äºä¸¤ä¸ªç°ä»£ C++ æ ¸å¿ƒç‰¹æ€§ï¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼å’Œå®Œç¾è½¬å‘ã€‚å½“ç¼–è¯‘å™¨é‡åˆ° std::less&lt;>{}(a, b) è¿™æ ·çš„è¡¨è¾¾å¼æ—¶ï¼š
...</p></div><footer class=entry-footer><span title='2025-06-20 00:00:00 +0000 UTC'>å‘å¸ƒäº2025-06-20</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to C++é€æ˜è¿ç®—ç¬¦" href=https://kerolt.github.io/posts/c++/c++%E9%80%8F%E6%98%8E%E8%BF%90%E7%AE%97%E7%AC%A6/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>C++æŠ˜å è¡¨è¾¾å¼</h2></header><div class=entry-content><p>C++17 ä¸ºæ¨¡æ¿å…ƒç¼–ç¨‹å¸¦æ¥äº†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç‰¹æ€§ï¼šæŠ˜å è¡¨è¾¾å¼ï¼ˆfold expressionsï¼‰ã€‚å®ƒçš„å‡ºç°è®©å˜å‚æ¨¡æ¿å‡½æ•°çš„ç¼–å†™å˜å¾—æ›´åŠ ç®€æ´ã€æ¸…æ™°å’Œç›´è§‚ã€‚
1. å¦‚ä½•å¤„ç†å˜é•¿å‚æ•°åŒ… åœ¨ C++11/14 ä¸­ï¼Œå¦‚æœæˆ‘ä»¬è¦å¤„ç†å˜é•¿å‚æ•°åŒ…ï¼ˆparameter packï¼‰ï¼Œé€šå¸¸éœ€è¦é€’å½’å±•å¼€ï¼Œä¾‹å¦‚ï¼š
template&lt;typename T> void print(const T& t) { std::cout &lt;&lt; t &lt;&lt; '\n'; } template&lt;typename T, typename... Args> void print(const T& t, const Args&... args) { std::cout &lt;&lt; t &lt;&lt; ", "; print(args...); } è™½ç„¶è¿™æ®µä»£ç èƒ½å®Œæˆä»»åŠ¡ï¼Œä½†å´ç•¥æ˜¾å†—é•¿ï¼Œå¹¶ä¸”ç”Ÿæˆçš„æ±‡ç¼–ä»£ç ä¹Ÿä¼šå¾ˆå¤šã€‚C++17 ä¸­å¼•å…¥çš„æŠ˜å è¡¨è¾¾å¼ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
å¯ä»¥åœ¨ godbolt ä¸Šçœ‹çœ‹ä¸¤ç§æ–¹æ³•ç”Ÿæˆçš„æ±‡ç¼–ä»£ç ï¼šhttps://godbolt.org/z/55a7q85oE
2. ä»€ä¹ˆæ˜¯æŠ˜å è¡¨è¾¾å¼ æŠ˜å è¡¨è¾¾å¼æ˜¯ä¸€ç§ç”¨è¿ç®—ç¬¦å¯¹å‚æ•°åŒ…è¿›è¡ŒæŠ˜å çš„æ–¹å¼ã€‚æŠ˜å è¡¨è¾¾å¼çš„å®ä¾‹åŒ–æŒ‰ä»¥ä¸‹æ–¹å¼å±•å¼€æˆè¡¨è¾¾å¼Â eï¼š
ï¼ˆå›¾ç‰‡æ¥æºï¼šhttps://zh.cppreference.com/w/cpp/language/foldï¼‰
åŸºæœ¬è¯­æ³•å½¢å¼ï¼š
ç±»å‹ è¯­æ³•å½¢å¼ ç¤ºä¾‹ ä¸€å…ƒå·¦æŠ˜å  (... op pack) (... + args) ä¸€å…ƒå³æŠ˜å  (pack op ...) (args + ...) äºŒå…ƒå·¦æŠ˜å  (init op ... op pack) (0 + ... + args) äºŒå…ƒå³æŠ˜å  (pack op ... op init) (args + ... + 0) æŠ˜å è¡¨è¾¾å¼æ”¯æŒå¤šç§è¿ç®—ç¬¦ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š
...</p></div><footer class=entry-footer><span title='2025-05-06 00:00:00 +0000 UTC'>å‘å¸ƒäº2025-05-06</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to C++æŠ˜å è¡¨è¾¾å¼" href=https://kerolt.github.io/posts/c++/c++%E6%8A%98%E5%8F%A0%E8%A1%A8%E8%BE%BE%E5%BC%8F/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨ Concept æ›¿ä»£åŸºäºè™šå‡½æ•°çš„æ¥å£</h2></header><div class=entry-content><p>åœ¨ C++20 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Concepts æ¥æ›¿ä»£ä¼ ç»Ÿçš„åŸºäºè™šå‡½æ•°çš„æ¥å£è®¾è®¡ï¼Œè¿™ç§æ–¹å¼æä¾›äº†æ›´å¥½çš„ç¼–è¯‘æ—¶æ£€æŸ¥ã€æ›´é«˜æ•ˆçš„ä»£ç ç”Ÿæˆå’Œæ›´çµæ´»çš„æ¥å£çº¦æŸã€‚
åœ¨ä¹‹å‰ï¼Œå¯èƒ½æ˜¯è¿™æ ·çš„ï¼š
class IDrawable { public: virtual ~IDrawable() = default; virtual void draw() const = 0; }; class Circle : public IDrawable { public: void draw() override { puts("Circle::draw()"); } }; class Squre : public IDrawable { public: void draw() override { puts("Squre::draw()"); } }; void render(IDrawable& drawable) { drawable.draw(); } ä½†æ˜¯æœ‰äº† Concept åï¼š
template &lt;typename T> concept Drawable = requires(T t) { { t.draw() } -> std::same_as&lt;void>; }; class Circle { public: void draw() const { puts("Circle::draw()"); } }; class Squre { public: void draw() { puts("Squre::draw()"); } }; template &lt;Drawable T> void render(T& drawable) { drawable.draw(); } ä¼˜åŠ¿ï¼š
...</p></div><footer class=entry-footer><span title='2025-04-28 00:00:00 +0000 UTC'>å‘å¸ƒäº2025-04-28</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to ä½¿ç”¨ Concept æ›¿ä»£åŸºäºè™šå‡½æ•°çš„æ¥å£" href=https://kerolt.github.io/posts/c++/%E4%BD%BF%E7%94%A8-concept-%E6%9B%BF%E4%BB%A3%E5%9F%BA%E4%BA%8E%E8%99%9A%E5%87%BD%E6%95%B0%E7%9A%84%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>C++ä½•æ—¶ä¼šé˜»æ­¢é»˜è®¤çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„ç”Ÿæˆ</h2></header><div class=entry-content><p>åœ¨C++ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ç±»çš„å®šä¹‰æƒ…å†µè‡ªåŠ¨å†³å®šæ˜¯å¦ç”Ÿæˆé»˜è®¤çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼ˆå¦‚æ„é€ å‡½æ•°ã€æ‹·è´/ç§»åŠ¨æ“ä½œã€ææ„å‡½æ•°ï¼‰ã€‚
1. ç”¨æˆ·æ˜¾å¼å£°æ˜ç›¸å…³æˆå‘˜å‡½æ•° æ˜¾å¼å£°æ˜æˆ–åˆ é™¤æŸä¸ªå‡½æ•°ï¼š
å¦‚æœç”¨æˆ·æ˜¾å¼å£°æ˜ï¼ˆå³ä½¿ä½¿ç”¨ =default æˆ– =deleteï¼‰æŸä¸ªç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œç¼–è¯‘å™¨å°†ä¸å†ç”Ÿæˆé»˜è®¤ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼š
class Example { public: Example() = default; // å…è®¸ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•° Example(const Example&) {} // ç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•° // ç¼–è¯‘å™¨ä¸å†ç”Ÿæˆé»˜è®¤çš„ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ }; 2. ç”¨æˆ·å®šä¹‰ææ„å‡½æ•°ã€æ‹·è´/ç§»åŠ¨æ“ä½œçš„å½±å“ å®šä¹‰ææ„å‡½æ•°ï¼š
å¦‚æœç”¨æˆ·å®šä¹‰äº†ææ„å‡½æ•°ï¼ˆå³ä½¿ä¸ºç©ºï¼‰ï¼Œç¼–è¯‘å™¨ä¼šåˆ é™¤é»˜è®¤çš„ç§»åŠ¨æ“ä½œï¼ˆç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼‰ï¼Œä½†æ‹·è´æ“ä½œä»å¯èƒ½ç”Ÿæˆï¼ˆé™¤éå…¶ä»–æ¡ä»¶é˜»æ­¢ï¼‰ã€‚
class Example { public: ~Example() {} // ç”¨æˆ·å®šä¹‰çš„ææ„å‡½æ•° // ç§»åŠ¨æ“ä½œè¢«éšå¼åˆ é™¤ï¼Œæ‹·è´æ“ä½œå¯èƒ½ç”Ÿæˆï¼ˆè‹¥æ— å…¶ä»–é™åˆ¶ï¼‰ }; å®šä¹‰æ‹·è´æ“ä½œï¼š
å¦‚æœç”¨æˆ·å®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°æˆ–æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼Œç¼–è¯‘å™¨ä¼šåˆ é™¤é»˜è®¤çš„ç§»åŠ¨æ“ä½œã€‚
class Example { public: Example(const Example&) {} // ç”¨æˆ·å®šä¹‰çš„æ‹·è´æ„é€ å‡½æ•° // ç§»åŠ¨æ“ä½œè¢«éšå¼åˆ é™¤ }; å®šä¹‰ç§»åŠ¨æ“ä½œï¼š
å¦‚æœç”¨æˆ·å®šä¹‰äº†ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œç¼–è¯‘å™¨ä¼šåˆ é™¤é»˜è®¤çš„æ‹·è´æ“ä½œã€‚
#include &lt;utility> #include &lt;string> #include &lt;iostream> struct Example { std::string str; Example() = default; Example(const std::string& s): str(s) { std::cout &lt;&lt; "Example()\n"; } Example(Example&& other) { str = std::move(other.str); std::cout &lt;&lt; "Example(Example&&)\n"; } Example& operator=(Example&& other) { str = std::move(other.str); std::cout &lt;&lt; "operator=(Example&&)\n"; return *this; } }; int main() { Example x1("Hello"); Example x2 = std::move(x1); Example x3; x3 = std::move(x2); } æ‰§è¡Œç»“æœä¸ºï¼š
...</p></div><footer class=entry-footer><span title='2025-03-13 00:00:00 +0000 UTC'>å‘å¸ƒäº2025-03-13</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to C++ä½•æ—¶ä¼šé˜»æ­¢é»˜è®¤çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°çš„ç”Ÿæˆ" href=https://kerolt.github.io/posts/c++/c++%E4%BD%95%E6%97%B6%E4%BC%9A%E9%98%BB%E6%AD%A2%E9%BB%98%E8%AE%A4%E7%9A%84%E7%89%B9%E6%AE%8A%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E7%9A%84%E7%94%9F%E6%88%90/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>enable_shared_from_thisçš„ä½œç”¨</h2></header><div class=entry-content><p>C++ ä¸­ï¼Œstd::enable_shared_from_thisç±»æ¨¡æ¿å’Œshared_from_thisæˆå‘˜å‡½æ•°ä¸»è¦ç”¨äºåœ¨ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ä¸­å®‰å…¨åœ°è·å–æŒ‡å‘è‡ªèº«çš„std::shared_ptrã€‚å®ƒä»¬çš„ä½œç”¨æ›´å¤šæ˜¯ä¸ºäº†ç¡®ä¿èµ„æºæ­£ç¡®ç®¡ç†ã€‚
...</p></div><footer class=entry-footer><span title='2024-09-16 00:00:00 +0000 UTC'>å‘å¸ƒäº2024-09-16</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to enable_shared_from_thisçš„ä½œç”¨" href=https://kerolt.github.io/posts/c++/enable_shared_from_this%E7%9A%84%E4%BD%9C%E7%94%A8/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ã€åç¨‹ã€‘C++æ˜¯å¦‚ä½•é€šè¿‡SFINAEæ¥æ£€æŸ¥promise_typeçš„</h2></header><div class=entry-content><p>æˆ‘ä»¬çŸ¥é“åœ¨C++20çš„åç¨‹ä¸­ï¼Œè‡ªå·±å®ç°çš„Coroutineä¸­å¿…é¡»åŒ…å«ä¸€ä¸ªPromiseï¼Œå¹¶ä¸”è¿™ä¸ªPromiseå¿…é¡»è¦å®ç°ï¼š
get_return_object() initial_suspend() final_suspend() unhandled_exception() å°‘äº†å…¶ä¸­ä»»ä½•ä¸€ä¸ªï¼Œç¼–è¯‘å™¨éƒ½ä¼šæŠ¥é”™ã€‚é‚£è¿™æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå¦‚æœæ˜¯åƒjavaé‚£æ ·æ˜¯ä¸€ä¸ªæ¥å£è€Œæ²¡æœ‰å¯¹åº”çš„å®ç°ä»è€ŒæŠ¥é”™è¿˜èƒ½ç†è§£ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä»£ç ä¸­çš„Promiseå®Œå®Œå…¨å…¨æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨ç»§æ‰¿ï¼Œç¼–è¯‘å™¨ä½ æ€ä¹ˆçŸ¥é“æˆ‘åœ¨å®ç°åç¨‹æ—¶å°‘äº†ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ
ç­”æ¡ˆå°±æ˜¯ï¼šSFINAEï¼ˆSubstitution Failure Is Not An Errorï¼Œæ›¿æ¢å¤±è´¥ä¸æ˜¯é”™è¯¯ï¼‰ã€‚
...</p></div><footer class=entry-footer><span title='2024-09-01 00:00:00 +0000 UTC'>å‘å¸ƒäº2024-09-01</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to ã€åç¨‹ã€‘C++æ˜¯å¦‚ä½•é€šè¿‡SFINAEæ¥æ£€æŸ¥promise_typeçš„" href=https://kerolt.github.io/posts/c++/%E5%8D%8F%E7%A8%8Bc++%E6%98%AF%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87sfinae%E6%9D%A5%E6%A3%80%E6%9F%A5promise_type%E7%9A%84/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>C++ä¸­å¦‚ä½•ä½¿ç”¨lambdaå®ç°é€’å½’</h2></header><div class=entry-content><p>åœ¨ç”¨C++åˆ·leetcodeæ—¶ï¼Œæˆ‘å¸Œæœ›æŠŠä¸€ä¸ªé€’å½’å‡½æ•°åƒjsã€pythoné‚£æ ·å†™åœ¨è¿è¡Œå‡½æ•°å†…éƒ¨ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨functionå’Œlambdaè¡¨è¾¾å¼æ¥å®ç°ã€‚ä½†å¦‚æœè¿™ä¸ªé€’å½’å‡½æ•°çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œé‚£ä¹ˆfunctionçš„æ¨¡æ¿å‚æ•°åŒæ ·éœ€è¦å†™å¾ˆå¤šï¼Œèƒ½ä¸èƒ½ç”¨autoæ¥å®ç°å¾—ç®€å•ä¸€ç‚¹å‘¢ï¼Ÿ
...</p></div><footer class=entry-footer><span title='2024-08-27 00:00:00 +0000 UTC'>å‘å¸ƒäº2024-08-27</span>&nbsp;&nbsp;Â·&nbsp;&nbsp;Kerolt</footer><a class=entry-link aria-label="post link to C++ä¸­å¦‚ä½•ä½¿ç”¨lambdaå®ç°é€’å½’" href=https://kerolt.github.io/posts/c++/c++%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8lambda%E5%AE%9E%E7%8E%B0%E9%80%92%E5%BD%92/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://kerolt.github.io/categories/c++/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2026 <a href=https://kerolt.github.io/>Kerolt's Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>