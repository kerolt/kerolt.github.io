<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>OS on Kerolt&#39;s Blog</title>
    <link>https://kerolt.github.io/categories/os/</link>
    <description>Recent content in OS on Kerolt&#39;s Blog</description>
    <image>
      <title>Kerolt&#39;s Blog</title>
      <url>https://kerolt.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://kerolt.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.152.2</generator>
    <language>en</language>
    <lastBuildDate>Sun, 09 Nov 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://kerolt.github.io/categories/os/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Linuxä¿®æ”¹IP</title>
      <link>https://kerolt.github.io/posts/os/network/linux%E4%BF%AE%E6%94%B9ip/</link>
      <pubDate>Sun, 09 Nov 2025 00:00:00 +0000</pubDate>
      <guid>https://kerolt.github.io/posts/os/network/linux%E4%BF%AE%E6%94%B9ip/</guid>
      <description>&lt;p&gt;é¦–å…ˆç¡®å®šç½‘ç»œæ˜¯ç”¨ä»€ä¹ˆå·¥å…·ç®¡ç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ systemctl is-active NetworkManager
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;active
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯´æ˜ &lt;strong&gt;ç½‘ç»œç”± NetworkManager ç®¡ç†&lt;/strong&gt;ï¼Œè¿™ç§æƒ…å†µä¿®æ”¹ IP é€šå¸¸ä½¿ç”¨ &lt;code&gt;nmcli&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;h2 id=&#34;ä¿®æ”¹é™æ€-ip&#34;&gt;ä¿®æ”¹é™æ€ IP&lt;/h2&gt;
&lt;h3 id=&#34;çœ‹å½“å‰è¿æ¥å&#34;&gt;çœ‹å½“å‰è¿æ¥å&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;nmcli connection show
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºç±»ä¼¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NAME                UUID                                  TYPE      DEVICE
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Wired connection 1  2d3e1f6a-4e87-4a76-8f23-2f459c8c112b  ethernet  enp60s0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;NAME&lt;/code&gt;ï¼ˆå¦‚ &lt;code&gt;Wired connection 1&lt;/code&gt;ï¼‰å°±æ˜¯è¿æ¥åï¼Œåé¢å‘½ä»¤è¦ç”¨åˆ°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¿®æ”¹ä¸ºé™æ€-ip&#34;&gt;ä¿®æ”¹ä¸ºé™æ€ IP&lt;/h3&gt;
&lt;p&gt;å‡è®¾ä½ æƒ³æŠŠ IP è®¾ç½®ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IPï¼š&lt;code&gt;192.168.1.100/24&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç½‘å…³ï¼š&lt;code&gt;192.168.1.1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;DNSï¼š&lt;code&gt;8.8.8.8, 1.1.1.1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo nmcli con mod &lt;span style=&#34;color:#c30&#34;&gt;&amp;#34;Wired connection 1&amp;#34;&lt;/span&gt; ipv4.addresses 192.168.1.100/24
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo nmcli con mod &lt;span style=&#34;color:#c30&#34;&gt;&amp;#34;Wired connection 1&amp;#34;&lt;/span&gt; ipv4.gateway 192.168.1.1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo nmcli con mod &lt;span style=&#34;color:#c30&#34;&gt;&amp;#34;Wired connection 1&amp;#34;&lt;/span&gt; ipv4.dns &lt;span style=&#34;color:#c30&#34;&gt;&amp;#34;8.8.8.8,1.1.1.1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo nmcli con mod &lt;span style=&#34;color:#c30&#34;&gt;&amp;#34;Wired connection 1&amp;#34;&lt;/span&gt; ipv4.method manual
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ &lt;code&gt;&amp;quot;Wired connection 1&amp;quot;&lt;/code&gt; éœ€è¦æ›¿æ¢ä¸ºä½ è‡ªå·±çš„è¿æ¥åã€‚&lt;br&gt;
å¦‚æœåå­—é‡Œæœ‰ç©ºæ ¼ï¼Œå¿…é¡»åŠ å¼•å·ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linuxä¸­çš„vethä¸bridge</title>
      <link>https://kerolt.github.io/posts/os/network/linux%E4%B8%AD%E7%9A%84veth%E4%B8%8Ebridge/</link>
      <pubDate>Sat, 08 Nov 2025 00:00:00 +0000</pubDate>
      <guid>https://kerolt.github.io/posts/os/network/linux%E4%B8%AD%E7%9A%84veth%E4%B8%8Ebridge/</guid>
      <description>&lt;p&gt;å®¹å™¨ç½‘ç»œæœ€å…¸å‹çš„åŸºç¡€æ¨¡å‹ â€”â€” &lt;strong&gt;ä¸¤ä¸ªä¸åŒçš„å‘½åç©ºé—´é€šè¿‡ bridge é€šä¿¡&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;p&gt;Docker é»˜è®¤çš„ bridge æ¨¡å¼å°±æ˜¯åŸºäºæ­¤åŸç†,åˆ›å»º &lt;code&gt;docker0&lt;/code&gt; bridgeï¼Œå®¹å™¨ veth å¯¹ä¸€ç«¯è¿æ¥å®¹å™¨ï¼Œä¸€ç«¯è¿æ¥ docker0ï¼Œæä¾› NAT åŠŸèƒ½è®©å®¹å™¨å¯ä»¥è®¿é—®å¤–ç½‘ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç®€å•çš„ç»“æ„å¦‚ä¸‹ğŸ‘‡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      +---------------------+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      |      root NS        |   (å®¿ä¸»æœº / default netns)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      |  bridge: br0(10.0.0.254/24)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      |                     |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      |   veth0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  |   &amp;lt;- veth0 åœ¨ rootï¼Œmaster=br0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      |                  â”‚  |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      |   veth2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”˜  &amp;lt;- veth2 åœ¨ rootï¼Œmaster=br0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      +---------------------+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                               â”‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;             â”‚                                   â”‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       veth0 &amp;lt;-&amp;gt; veth1                       veth2 &amp;lt;-&amp;gt; veth3
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  (root, peer)   (in ns1)                 (root, peer)   (in ns2)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ns1 namespace                          ns2 namespace
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                â”‚ veth1         â”‚                     â”‚ veth3         â”‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                â”‚ 10.0.0.1/24   â”‚                     â”‚ 10.0.0.2/24   â”‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;div class=&#34;admonition note&#34;&gt;
      &lt;div class=&#34;admonition-header&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 576 512&#34;&gt;&lt;path d=&#34;M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z&#34;/&gt;&lt;/svg&gt;
        &lt;span&gt;veth (Virtual Ethernet Device)&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class=&#34;admonition-content&#34;&gt;
        &lt;p&gt;è™šæ‹Ÿä»¥å¤ªç½‘è®¾å¤‡ï¼Œæ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œç±»ä¼¼ç®¡é“ä¸¤ç«¯&lt;/p&gt;</description>
    </item>
    <item>
      <title>å¦‚ä½•ç†è§£å†…æ ¸æ€ä¸ç”¨æˆ·æ€åˆ‡æ¢çš„ä¸Šä¸‹æ–‡å¼€é”€</title>
      <link>https://kerolt.github.io/posts/os/%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%86%85%E6%A0%B8%E6%80%81%E4%B8%8E%E7%94%A8%E6%88%B7%E6%80%81%E5%88%87%E6%8D%A2%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E5%BC%80%E9%94%80/</link>
      <pubDate>Thu, 06 Nov 2025 00:00:00 +0000</pubDate>
      <guid>https://kerolt.github.io/posts/os/%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%86%85%E6%A0%B8%E6%80%81%E4%B8%8E%E7%94%A8%E6%88%B7%E6%80%81%E5%88%87%E6%8D%A2%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E5%BC%80%E9%94%80/</guid>
      <description>&lt;h2 id=&#34;ä¸€ä»€ä¹ˆæ˜¯ç”¨æˆ·æ€å’Œå†…æ ¸æ€&#34;&gt;ä¸€ã€ä»€ä¹ˆæ˜¯â€œç”¨æˆ·æ€â€å’Œâ€œå†…æ ¸æ€â€&lt;/h2&gt;
&lt;p&gt;CPU æœ‰ä¸åŒçš„ &lt;strong&gt;ç‰¹æƒçº§ï¼ˆPrivilege Levelï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·æ€ï¼ˆUser Modeï¼‰&lt;/strong&gt;ï¼š&lt;br&gt;
åº”ç”¨ç¨‹åºåœ¨è¿™é‡Œè¿è¡Œï¼Œæƒé™å—é™ï¼Œæ¯”å¦‚ä¸èƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶ã€ä¸èƒ½ä¿®æ”¹é¡µè¡¨ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…æ ¸æ€ï¼ˆKernel Modeï¼‰&lt;/strong&gt;ï¼š&lt;br&gt;
æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œåœ¨è¿™é‡Œï¼Œæ‹¥æœ‰å®Œå…¨çš„è®¿é—®æƒé™ï¼Œå¯ä»¥ç®¡ç†å†…å­˜ã€è®¾å¤‡ã€ä¸­æ–­ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;äºŒä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢context-switch&#34;&gt;äºŒã€ä»€ä¹ˆæ˜¯â€œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext Switchï¼‰â€&lt;/h2&gt;
&lt;p&gt;â€œä¸Šä¸‹æ–‡â€å°±æ˜¯ CPU å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡çš„æ‰€æœ‰çŠ¶æ€ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯„å­˜å™¨å†…å®¹ï¼ˆRIPã€RSPã€RAX ç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counterï¼‰&lt;/li&gt;
&lt;li&gt;æ ˆæŒ‡é’ˆ&lt;/li&gt;
&lt;li&gt;å†…å­˜æ˜ å°„ï¼ˆé¡µè¡¨ï¼‰&lt;/li&gt;
&lt;li&gt;è°ƒåº¦ä¿¡æ¯ï¼ˆä¼˜å…ˆçº§ã€æ—¶é—´ç‰‡ç­‰ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;æŒ‡çš„æ˜¯ CPU ä»ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªï¼ˆæ¯”å¦‚è¿›ç¨‹ A â†’ è¿›ç¨‹ Bï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸‰å†…æ ¸æ€ä¸ç”¨æˆ·æ€åˆ‡æ¢--è¿›ç¨‹åˆ‡æ¢ä½†éƒ½å±äºä¸Šä¸‹æ–‡åˆ‡æ¢&#34;&gt;ä¸‰ã€å†…æ ¸æ€ä¸ç”¨æˆ·æ€åˆ‡æ¢ â‰  è¿›ç¨‹åˆ‡æ¢ï¼Œä½†éƒ½å±äºâ€œä¸Šä¸‹æ–‡åˆ‡æ¢â€&lt;/h2&gt;
&lt;p&gt;è¿™ä¸¤ç§æ˜¯ä¸åŒå±‚æ¬¡çš„â€œåˆ‡æ¢â€ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç±»å‹&lt;/th&gt;
          &lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
          &lt;th&gt;æ˜¯å¦æ¶‰åŠè°ƒåº¦&lt;/th&gt;
          &lt;th&gt;å¼€é”€å¤§å°&lt;/th&gt;
          &lt;th&gt;å¤‡æ³¨&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ç”¨æˆ·æ€ â†’ å†…æ ¸æ€&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ç³»ç»Ÿè°ƒç”¨ã€I/Oã€ä¸­æ–­&lt;/td&gt;
          &lt;td&gt;å¦&lt;/td&gt;
          &lt;td&gt;å°ï¼ˆå‡ ååˆ°å‡ ç™¾çº³ç§’ï¼‰&lt;/td&gt;
          &lt;td&gt;åŒä¸€çº¿ç¨‹ï¼Œåªæ˜¯ CPU ç‰¹æƒçº§å˜åŒ–&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ä»è¿›ç¨‹ A â†’ è¿›ç¨‹ B&lt;/td&gt;
          &lt;td&gt;æ˜¯&lt;/td&gt;
          &lt;td&gt;å¤§ï¼ˆå¾®ç§’çº§ï¼‰&lt;/td&gt;
          &lt;td&gt;ä¸ä»…æ¢æ ˆï¼Œè¿˜è¦æ¢è™šæ‹Ÿå†…å­˜ä¸Šä¸‹æ–‡&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;å››ä¸ºä»€ä¹ˆå†…æ ¸ç”¨æˆ·æ€åˆ‡æ¢æœ‰å¼€é”€&#34;&gt;å››ã€ä¸ºä»€ä¹ˆå†…æ ¸/ç”¨æˆ·æ€åˆ‡æ¢æœ‰â€œå¼€é”€â€&lt;/h2&gt;
&lt;p&gt;å†…æ ¸æ€åˆ‡æ¢çš„ä»£ä»·æ¥è‡ªå‡ ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-cpu-ç‰¹æƒçº§å˜åŒ–&#34;&gt;1. CPU ç‰¹æƒçº§å˜åŒ–&lt;/h3&gt;
&lt;p&gt;åˆ‡æ¢æ—¶ CPU ä¼šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿å­˜å½“å‰å¯„å­˜å™¨çŠ¶æ€ï¼›&lt;/li&gt;
&lt;li&gt;æ”¹å˜ç‰¹æƒçº§ï¼ˆä» ring3 â†’ ring0ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;åˆ‡æ¢åˆ°å†…æ ¸æ ˆï¼ˆæ¯ä¸ªçº¿ç¨‹æœ‰ç‹¬ç«‹å†…æ ¸æ ˆï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œç³»ç»Ÿè°ƒç”¨å…¥å£ä»£ç ï¼ˆ&lt;code&gt;syscall&lt;/code&gt;ã€&lt;code&gt;sysenter&lt;/code&gt; æŒ‡ä»¤ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå®Œåå†åå‘æ¢å¤å›ç”¨æˆ·æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›è¿‡ç¨‹è™½ç„¶ä¸æ˜¯â€œçº¿ç¨‹åˆ‡æ¢â€ï¼Œä½†éƒ½éœ€è¦ CPU åšé¢å¤–æ“ä½œã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux NAPIæœºåˆ¶çŸ¥è¯†ç‚¹æ€»ç»“</title>
      <link>https://kerolt.github.io/posts/os/linux-napi%E6%9C%BA%E5%88%B6%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/</link>
      <pubDate>Wed, 17 Sep 2025 00:00:00 +0000</pubDate>
      <guid>https://kerolt.github.io/posts/os/linux-napi%E6%9C%BA%E5%88%B6%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;å¯¹ &lt;a href=&#34;https://docs.kernel.org/networking/napi.html&#34;&gt;https://docs.kernel.org/networking/napi.html&lt;/a&gt; çš„æ€»ç»“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;NAPI (New APIï¼Œä½†ç°å·²æ— ç‰¹å®šå«ä¹‰) æ˜¯ Linux å†…æ ¸ä¸­ç”¨äºé«˜æ•ˆå¤„ç†ç½‘ç»œæ•°æ®åŒ…çš„ä¸€ç§æœºåˆ¶ï¼Œæ—¨åœ¨å‡å°‘é«˜è´Ÿè½½ä¸‹çš„ä¸­æ–­å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;å…¶â€‹ç›®çš„â€‹â€‹æ˜¯ä¸ºäº†è§£å†³ä¼ ç»ŸåŸºäºä¸­æ–­çš„åŒ…å¤„ç†åœ¨é«˜æµé‡ä¸‹çš„æ€§èƒ½é—®é¢˜ï¼ˆâ€œä¸­æ–­æ´»é”â€ï¼‰ã€‚é€šè¿‡æ··åˆâ€‹&lt;strong&gt;â€‹ä¸­æ–­â€‹&lt;/strong&gt;â€‹å’Œâ€‹&lt;strong&gt;â€‹è½®è¯¢â€‹&lt;/strong&gt;â€‹æ¨¡å¼ï¼Œåœ¨ä½è´Ÿè½½æ—¶ä½¿ç”¨ä¸­æ–­ä¿è¯ä½å»¶è¿Ÿï¼Œåœ¨é«˜è´Ÿè½½æ—¶åˆ‡æ¢åˆ°è½®è¯¢ä¿è¯é«˜ååé‡ã€‚&lt;/p&gt;
&lt;p&gt;è®¾å¤‡é€šè¿‡ä¸­æ–­é€šçŸ¥æœ‰æ–°æ•°æ®åŒ… -&amp;gt; å†…æ ¸è°ƒåº¦å¯¹åº”çš„ NAPI å®ä¾‹ -&amp;gt; åœ¨è½¯ä¸­æ–­ä¸Šä¸‹æ–‡ï¼ˆæˆ–å†…æ ¸çº¿ç¨‹ï¼‰ä¸­è½®è¯¢å¤„ç†å¤šä¸ªæ•°æ®åŒ… -&amp;gt; å¤„ç†å®Œæ¯•åå†æ‰“å¼€ä¸­æ–­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ ¸å¿ƒæ•°æ®ç»“æ„ä¸-api&#34;&gt;æ ¸å¿ƒæ•°æ®ç»“æ„ä¸ API&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;â€‹&lt;strong&gt;â€‹&lt;code&gt;struct napi_struct&lt;/code&gt;â€‹&lt;/strong&gt;â€‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œä»£è¡¨ä¸€ä¸ª NAPI å®ä¾‹ï¼Œä¿å­˜å…¶çŠ¶æ€ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;é€šå¸¸ä¸ä¸€ä¸ªä¸­æ–­æˆ–ä¸€ä¸ªé˜Ÿåˆ—ï¼ˆRX/TXï¼‰ç›¸å…³è”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â€‹&lt;strong&gt;â€‹æ§åˆ¶ API (åˆå§‹åŒ–å’ŒçŠ¶æ€ç®¡ç†)â€‹&lt;/strong&gt;â€‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;netif_napi_add()&lt;/code&gt; / &lt;code&gt;netif_napi_del()&lt;/code&gt;: å‘ç³»ç»Ÿæ·»åŠ /åˆ é™¤ä¸€ä¸ª NAPI å®ä¾‹ï¼ˆé€šå¸¸é™„åŠ åˆ°ç½‘ç»œè®¾å¤‡ä¸Šï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;napi_enable()&lt;/code&gt; / &lt;code&gt;napi_disable()&lt;/code&gt;: å¯ç”¨/ç¦ç”¨ NAPI å®ä¾‹ã€‚ç¦ç”¨çŠ¶æ€ä¸‹å®ä¾‹ä¸ä¼šè¢«è°ƒåº¦ï¼Œ&lt;code&gt;poll&lt;/code&gt; æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ã€‚â€‹&lt;strong&gt;â€‹æ³¨æ„â€‹&lt;/strong&gt;â€‹ï¼šAPI éå¹‚ç­‰ï¼Œé”™è¯¯è°ƒç”¨é¡ºåºå¯èƒ½å¯¼è‡´æ­»é”æˆ–ç«æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â€‹&lt;strong&gt;â€‹æ•°æ®è·¯å¾„ API (è°ƒåº¦ä¸å¤„ç†)â€‹&lt;/strong&gt;â€‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;napi_schedule()&lt;/code&gt;: â€‹&lt;strong&gt;â€‹æ ¸å¿ƒè°ƒåº¦å‡½æ•°â€‹&lt;/strong&gt;â€‹ã€‚é€šå¸¸åœ¨è®¾å¤‡çš„ä¸­æ–­å¤„ç†ç¨‹åºä¸­è°ƒç”¨ï¼Œé€šçŸ¥å†…æ ¸æœ‰æ•°æ®éœ€è¦å¤„ç†ï¼Œå¹¶è·å– NAPI å®ä¾‹çš„æ‰€æœ‰æƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;napi_schedule_irqoff()&lt;/code&gt;: &lt;code&gt;napi_schedule()&lt;/code&gt; çš„å˜ä½“ï¼Œç”¨äºå·²çŸ¥åœ¨ä¸­æ–­ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨çš„æƒ…å†µï¼Œå¯ä¼˜åŒ–ä¸­æ–­å±è”½æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;napi_complete_done()&lt;/code&gt;: â€‹&lt;strong&gt;â€‹å®Œæˆå¤„ç†å‡½æ•°â€‹&lt;/strong&gt;â€‹ã€‚å½“é©±åŠ¨ç¨‹åºçš„ &lt;code&gt;poll&lt;/code&gt; æ–¹æ³•å¤„ç†å®Œæ‰€æœ‰äº‹ä»¶åè°ƒç”¨æ­¤å‡½æ•°ï¼Œé‡Šæ”¾å®ä¾‹çš„æ‰€æœ‰æƒã€‚â€‹&lt;strong&gt;â€‹è­¦å‘Šâ€‹&lt;/strong&gt;â€‹ï¼š&lt;code&gt;budget&lt;/code&gt; ä¸º 0 æ—¶ç»ä¸èƒ½è°ƒç”¨ï¼›è‹¥å¤„ç†æ°å¥½ç”¨å®Œ &lt;code&gt;budget&lt;/code&gt; ä¸”å·¥ä½œå·²å®Œæˆï¼Œéœ€è°¨æ…è¿”å› &lt;code&gt;budget - 1&lt;/code&gt; æˆ–ç­‰å¾…ä¸‹æ¬¡è°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;é©±åŠ¨ç¨‹åºå®ç°è¦ç‚¹&#34;&gt;é©±åŠ¨ç¨‹åºå®ç°è¦ç‚¹&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;â€‹&lt;strong&gt;â€‹&lt;code&gt;poll&lt;/code&gt; æ–¹æ³•â€‹&lt;/strong&gt;â€‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é©±åŠ¨å¿…é¡»å®ç°çš„å›è°ƒå‡½æ•°ï¼Œç”±å†…æ ¸è°ƒåº¦æ‰§è¡Œå®é™…çš„æ•°æ®åŒ…å¤„ç†å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;â€‹&lt;strong&gt;â€‹å‚æ•° &lt;code&gt;budget&lt;/code&gt;â€‹&lt;/strong&gt;â€‹ï¼šé™åˆ¶ä¸€æ¬¡ &lt;code&gt;poll&lt;/code&gt; è°ƒç”¨æœ€å¤šå¯å¤„ç†çš„â€‹&lt;strong&gt;â€‹æ¥æ”¶â€‹&lt;/strong&gt;â€‹ï¼ˆRXï¼‰æ•°æ®åŒ…æ•°é‡ï¼ˆå‘é€ TX å¤„ç†æ— æ­¤é™åˆ¶ï¼‰ã€‚è‹¥è¿”å›å€¼ä¸º &lt;code&gt;budget&lt;/code&gt;ï¼Œè¡¨ç¤ºè¿˜æœ‰å·¥ä½œæœªå®Œæˆï¼Œå†…æ ¸ä¼šå†æ¬¡è°ƒåº¦ï¼›è‹¥å°äº &lt;code&gt;budget&lt;/code&gt;ï¼Œè¡¨ç¤ºæœ¬è½®å¤„ç†å·²å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â€‹&lt;strong&gt;â€‹ä¸­æ–­å±è”½ç­–ç•¥â€‹&lt;/strong&gt;â€‹ï¼š&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
